<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Forever Valentine, Shreya</title>
    <style>
        :root {
            --rose: #ff4d6d;
            --blush: #ffb3c1;
            --dark-rose: #c9184a;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #fb6f92, #ffb3c1);
            font-family: 'Georgia', serif;
            overflow: hidden;
            color: #333;
        }

        /* Start Overlay - Fixes Audio Issues */
        #startOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--rose);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            transition: opacity 0.8s ease;
        }

        #startOverlay button {
            padding: 20px 40px;
            font-size: 1.5rem;
            background: white;
            color: var(--rose);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
            text-align: center;
            max-width: 550px;
            width: 90%;
            z-index: 100;
            position: relative;
        }

        h1 { color: var(--rose); font-size: 2.2rem; margin-bottom: 10px; }
        
        .btn-container {
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            position: relative;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        #yesBtn { background: var(--rose); color: white; z-index: 101; }
        #noBtn { background: white; color: var(--rose); border: 2px solid var(--rose); position: absolute; }

        .polaroid {
            width: 280px;
            background: white;
            padding: 12px 12px 60px 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 20px auto;
            transform: rotate(-2deg);
            position: relative;
            border: 1px solid #eee;
        }

        #slideshowImg {
            width: 100%;
            height: 350px;
            object-fit: cover;
            transition: opacity 1s ease-in-out;
        }

        .heartfelt-message {
            font-style: italic;
            color: #444;
            margin-top: 20px;
            border-left: 4px solid var(--rose);
            padding-left: 15px;
            text-align: left;
            min-height: 120px;
            font-size: 1.1rem;
        }

        .hidden { display: none; }
        
        .floating-item {
            position: fixed;
            top: -10%;
            pointer-events: none;
            animation: fall linear forwards;
            z-index: 1;
        }

        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }

        .fade-in { animation: fadeIn 1.5s forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div id="startOverlay">
        <h1>For My Wife, Shreya</h1>
        <button onclick="startExperience()">Open Your Surprise ‚ù§Ô∏è</button>
    </div>

    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3" type="audio/mpeg">
    </audio>

    <div class="card" id="mainCard">
        <h1>My Dearest Shreya...</h1>
        <p>I wanted to ask you something special, but I know you love a challenge. Catch me if you can!</p>
        <div class="btn-container">
            <button class="btn" id="yesBtn">Will you be my Valentine?</button>
            <button class="btn" id="noBtn">No</button>
        </div>
    </div>

    <div class="card hidden" id="successCard">
        <h1>I Knew You'd Choose Me! ‚ù§Ô∏è</h1>
        <div class="polaroid">
            <img id="slideshowImg" src="" alt="Our Memories">
        </div>
        <div class="heartfelt-message">
            <p id="typingText"></p>
        </div>
    </div>

    <script>
        const photos = [
            "https://raw.githubusercontent.com/s310416/Valentine/main/476031986_18442502752078948_2412988007898437067_n.jpg",
            "https://raw.githubusercontent.com/s310416/Valentine/main/604791674_25284191261250258_909858467439072521_n.jpg",
            "https://raw.githubusercontent.com/s310416/Valentine/main/608885971_25319589951043722_1963308344607099227_n.jpg",
            "https://raw.githubusercontent.com/s310416/Valentine/main/616832652_25488463550823027_3734716905551767143_n.jpg"
        ];

        const message = "Shreya, my love... I knew you would catch me, just like I caught the greatest blessing in the world when you became my wife. You are my rock, my best friend, and the most beautiful part of my life. Every heartbeat of mine belongs to you. Thank you for always choosing me and for loving me so deeply. I love you more than words can ever say. Forever yours!";

        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const mainCard = document.getElementById('mainCard');
        const successCard = document.getElementById('successCard');
        const typingText = document.getElementById('typingText');
        const music = document.getElementById('bgMusic');
        const slideImg = document.getElementById('slideshowImg');

        let yesHoverCount = 0;
        const maxYesHovers = 5;

        // Start function to handle browser audio policy
        function startExperience() {
            document.getElementById('startOverlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('startOverlay').style.display = 'none';
                music.play().catch(error => console.log("Audio play failed:", error));
            }, 800);
        }

        const moveElement = (el) => {
            const x = Math.random() * (window.innerWidth - el.offsetWidth);
            const y = Math.random() * (window.innerHeight - el.offsetHeight);
            el.style.position = 'fixed';
            el.style.left = x + 'px';
            el.style.top = y + 'px';
        };

        // Yes Button Chase
        yesBtn.addEventListener('mouseover', () => {
            if (yesHoverCount < maxYesHovers) {
                moveElement(yesBtn);
                yesHoverCount++;
                if(yesHoverCount === 1) yesBtn.innerText = "Too fast for you? üòâ";
                if(yesHoverCount === 3) yesBtn.innerText = "Almost there, Shreya!";
                if(yesHoverCount === 5) {
                    yesBtn.innerText = "Okay, I'm yours! ‚ù§Ô∏è";
                    yesBtn.style.position = 'relative';
                    yesBtn.style.left = '0';
                    yesBtn.style.top = '0';
                }
            }
        });

        noBtn.addEventListener('mouseover', () => moveElement(noBtn));

        yesBtn.addEventListener('click', () => {
            if (yesHoverCount >= maxYesHovers) {
                showSuccess();
            }
        });

        let currentPhotoIndex = 0;
        function updateSlideshow() {
            slideImg.style.opacity = 0;
            setTimeout(() => {
                slideImg.src = photos[currentPhotoIndex];
                slideImg.style.opacity = 1;
                currentPhotoIndex = (currentPhotoIndex + 1) % photos.length;
            }, 500);
        }

        function showSuccess() {
            mainCard.classList.add('hidden');
            setTimeout(() => {
                mainCard.style.display = 'none';
                successCard.classList.remove('hidden');
                successCard.classList.add('fade-in');
                slideImg.src = photos[0];
                setInterval(updateSlideshow, 3000);
                startTyping();
            }, 500);
        }

        function startTyping() {
            let i = 0;
            function type() {
                if (i < message.length) {
                    typingText.innerHTML += message.charAt(i);
                    i++;
                    setTimeout(type, 50);
                }
            }
            type();
        }

        // Background Petals
        setInterval(() => {
            const item = document.createElement('div');
            item.classList.add('floating-item');
            item.innerHTML = ['‚ù§Ô∏è', 'üå∏', '‚ú®', 'üíñ', 'üåπ'][Math.floor(Math.random() * 5)];
            item.style.left = Math.random() * 100 + 'vw';
            item.style.fontSize = (Math.random() * 20 + 15) + 'px';
            item.style.animationDuration = (Math.random() * 3 + 4) + 's';
            document.body.appendChild(item);
            setTimeout(() => item.remove(), 6000);
        }, 400);
    </script>
</body>
</html>
